<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØºÙ†ÙŠÙ„ÙŠ - Ø®Ù„ÙŠÙƒ Ù…Ø¹Ø§ÙŠØ§</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0a0b10;
            --pink-accent: #f83292;
            --pink-glow: rgba(248, 50, 146, 0.7);
            --gold: #ffcc00;
            --gradient-active: linear-gradient(to right, #9133a8, #f83292);
        }

        body, html {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Cairo', sans-serif;
            margin: 0; padding: 0;
            overflow: hidden;
            height: 100%;
        }

        /* Ø­Ø§ÙˆÙŠØ© ØµØ§Ù†Ø¹ Ø§Ù„Ø¥Ù‡Ø¯Ø§Ø¡ */
        .maker-layout {
            max-width: 420px; margin: auto; padding: 20px;
            display: flex; flex-direction: column; justify-content: center; min-height: 100vh;
        }

        .step-card {
            background: #1a1b26; border-radius: 35px; padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .main-input {
            width: 100%; background: rgba(0,0,0,0.5); border: 2px solid var(--pink-accent);
            border-radius: 20px; padding: 15px; color: white;
            font-family: 'Aref Ruqaa', serif; font-size: 30px; text-align: center; margin-bottom: 15px; box-sizing: border-box;
        }

        .btn-action {
            width: 100%; border: none; padding: 18px; border-radius: 50px;
            color: white; font-size: 18px; font-weight: bold;
            background: var(--gradient-active); cursor: pointer;
        }

        #view-screen { 
            display: none; height: 100vh; width: 100%; 
            overflow-y: scroll; scroll-snap-type: y mandatory; scrollbar-width: none;
        }
        #view-screen::-webkit-scrollbar { display: none; }

        section {
            height: 100vh; width: 100%; position: relative;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            scroll-snap-align: start; text-align: center; overflow: hidden;
        }

        /* --- ØªØµÙ…ÙŠÙ… Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„ØµÙˆØ±Ø©) --- */
        .step-2-bg {
            background: radial-gradient(circle at center, #1a0b2e 0%, #050508 100%);
            width: 100%; height: 100%; position: absolute; top:0; left:0;
        }

        /* Ø§Ù„Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ø¶Ø¨Ø§Ø¨ÙŠØ© Ø®Ù„Ù Ø§Ù„Ø§Ø³Ù… */
        .blur-circles {
            position: absolute; width: 300px; height: 200px;
            display: flex; justify-content: center; align-items: center;
            filter: blur(25px); opacity: 0.4; z-index: 1;
        }
        .b-circle {
            position: absolute; background: #fff; border-radius: 50%;
        }
        .bc1 { width: 120px; height: 120px; left: 10%; }
        .bc2 { width: 140px; height: 140px; left: 30%; opacity: 0.8; }
        .bc3 { width: 110px; height: 110px; left: 60%; }

        /* Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…ØªÙˆÙ‡Ø¬ */
        .glow-name {
            font-family: 'Aref Ruqaa', serif; font-size: 55px;
            color: #ff8ec7; text-shadow: 0 0 20px #f83292, 0 0 40px rgba(248, 50, 146, 0.5);
            z-index: 10; position: relative;
        }

        /* Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„Ù…ØªÙ†Ø§Ø«Ø±Ø© */
        .sparkle-star {
            position: absolute; color: #ffcc00; font-size: 24px;
            z-index: 5; filter: drop-shadow(0 0 5px #ffcc00);
            animation: twinkle 2s infinite alternate;
        }
        @keyframes twinkle { from { opacity: 0.4; transform: scale(0.8); } to { opacity: 1; transform: scale(1.1); } }

        /* Ø§Ù„Ù‡Ù„Ø§Ù„ */
        .crescent-moon {
            position: absolute; top: 38%; right: 18%; font-size: 40px;
            color: #ffcc00; transform: rotate(-15deg); z-index: 5;
            filter: drop-shadow(0 0 10px rgba(255, 204, 0, 0.5));
        }

        /* --- Ù…Ø´Ù‡Ø¯ Ø§Ù„Ø¸Ù„Ø§Ù„ (Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©) --- */
        .shadow-scene {
            width: 100%; height: 100%;
            background: radial-gradient(circle at center, #1a1310 0%, #050505 100%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .heart-icon { font-size: 48px; filter: drop-shadow(0 0 15px #f00); animation: pulse 1.2s infinite; }
        .v-line { width: 2px; height: 100px; background: linear-gradient(to bottom, #ffcc00, transparent); margin: 5px 0; }
        .figs { display: flex; gap: 20px; align-items: flex-end; }
        .fig-h { width: 35px; height: 35px; background: #000; border-radius: 50%; margin-bottom: 5px; }
        .fig-b { width: 50px; height: 80px; background: #000; border-radius: 20px 20px 5px 5px; }
        .stars-row { display: flex; gap: 12px; margin-top: 25px; color: #7a5a1e; font-size: 18px; }

        #start-overlay {
            position: fixed; top:0; left:0; width:100%; height:100%; background: var(--bg-dark);
            z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
    </style>
</head>
<body>

<div class="maker-layout" id="maker-ui">
    <div class="step-card">
        <h2 style="text-align: center; color: var(--gold); font-family: 'Aref Ruqaa';">ØºÙ†ÙŠÙ„ÙŠ ğŸµ</h2>
        <div id="setup-step">
            <input type="text" id="nameInput" class="main-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙ„Ù…">
            <button class="btn-action" onclick="generateLink()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· âœ¨</button>
        </div>
        <div id="result-step" style="display: none; text-align: center;">
            <div id="linkOutput" style="background:#000; padding:15px; border-radius:10px; font-size:10px; word-break:break-all; border:1px solid var(--pink-accent); margin-bottom: 15px;"></div>
            <button class="btn-action" onclick="copyLink()">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ“‹</button>
        </div>
    </div>
</div>

<div id="start-overlay" style="display: none;">
    <h2 id="greetName" style="font-family: 'Aref Ruqaa';"></h2>
    <button class="btn-action" style="width: 200px;" onclick="initExperience()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ù‡Ø¯Ø§Ø¡ ğŸµ</button>
</div>

<div id="view-screen">
    <section>
        <h1 style="font-family: 'Aref Ruqaa'; font-size: 60px; color: #fff;">ÙŠØ§ Ø­Ù„Ù… Ø¹Ù…Ø±ÙŠ</h1>
    </section>

    <section>
        <div class="step-2-bg"></div>
        
        <div class="blur-circles">
            <div class="b-circle bc1"></div>
            <div class="b-circle bc2"></div>
            <div class="b-circle bc3"></div>
        </div>

        <div class="crescent-moon">ğŸŒ™</div>

        <div class="sparkle-star" style="top:42%; left:18%;">âœ¦</div>
        <div class="sparkle-star" style="top:52%; left:22%;">âœ¦</div>
        <div class="sparkle-star" style="top:48%; right:22%;">âœ¦</div>
        <div class="sparkle-star" style="top:58%; right:26%;">âœ¦</div>
        <div class="sparkle-star" style="bottom:25%; left:45%;">âœ¦</div>
        <div class="sparkle-star" style="bottom:30%; left:55%;">âœ¦</div>

        <div class="glow-name" id="sceneName"></div>
        
        <h2 style="font-family: 'Aref Ruqaa'; font-size: 32px; color: #fff; margin-top: 150px; z-index:10; position:relative;">ÙŠØ§ Ø­Ù„Ù… Ø¹Ù…Ø±ÙŠ</h2>
    </section>

    <section>
        <h2 style="font-family: 'Aref Ruqaa'; font-size: 38px;">Ø²ÙŠ Ø§ÙˆÙ„ Ù…Ø±Ø©...</h2>
    </section>

    <section>
        <div class="shadow-scene">
            <div class="heart-icon">â¤ï¸</div>
            <div class="v-line"></div>
            <div class="figs">
                <div><div class="fig-h"></div><div class="fig-b"></div></div>
                <div><div class="fig-h"></div><div class="fig-b"></div></div>
            </div>
            <div class="stars-row">
                <span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span><span>â˜…</span>
            </div>
            <h2 style="font-family: 'Aref Ruqaa'; font-size: 35px; color: #fff; margin-top: 20px;">Ø®Ù„ÙŠÙƒ Ù…Ø¹Ø§ÙŠØ§</h2>
        </div>
    </section>
</div>

<audio id="player" loop></audio>

<script>
    let songUrl = "https://j.top4top.io/m_369843dq30.mp3";
    
    function generateLink() {
        const name = document.getElementById('nameInput').value;
        if (!name) return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø£ÙˆÙ„Ø§Ù‹");
        const link = window.location.origin + window.location.pathname + "?to=" + encodeURIComponent(name);
        document.getElementById('setup-step').style.display = 'none';
        document.getElementById('result-step').style.display = 'block';
        document.getElementById('linkOutput').innerText = link;
    }

    function copyLink() {
        navigator.clipboard.writeText(document.getElementById('linkOutput').innerText);
        alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!");
    }

    window.onload = function() {
        const params = new URLSearchParams(window.location.search);
        if (params.has('to')) {
            const name = decodeURIComponent(params.get('to'));
            document.getElementById('maker-ui').style.display = 'none';
            document.getElementById('start-overlay').style.display = 'flex';
            document.getElementById('view-screen').style.display = 'block';
            document.getElementById('greetName').innerText = "Ø¥Ù„Ù‰ " + name;
            document.getElementById('sceneName').innerText = name;
        }
    };

    function initExperience() {
        document.getElementById('start-overlay').style.display = 'none';
        const audio = document.getElementById('player');
        audio.src = songUrl;
        audio.play();
        let current = 0;
        const sections = document.querySelectorAll('section');
        setInterval(() => {
            current = (current + 1) % sections.length;
            document.getElementById('view-screen').scrollTo({ top: current * window.innerHeight, behavior: 'smooth' });
        }, 5000);
    }
</script>
</body>
</html>
